#include "reg51.h" //???????????????????
#include "intrins.h"
typedef unsigned int u16; //???????????
typedef unsigned char u8;
//--????? IO ?--//
sbit SRCLK=P3^6;
sbit RCLK=P3^5;
sbit SER=P3^4;
sbit LED=P0^7;
/********************************************************************
***********
* ? ? ? : Hc595SendByte(u8 dat1,u8 dat2)
* ???? : ?? 595 ?? 2 ??????
* ? ? : dat1:? 2 ? 595 ????
* * dat2: ? 1 ? 595 ????
* ? ? : ?
*********************************************************************
**********/
void Hc595SendByte(u8 dat1,u8 dat2)
{
u8 a;
SRCLK = 1;
RCLK = 1;
for(a=0;a<8;a++) //?? 8 ??
{
SER = dat1 >> 7; //????????
dat1 <<= 1;
SRCLK = 0; //????
_nop_();
_nop_();
SRCLK = 1;
}
for(a=0;a<8;a++) //?? 8 ??
{
SER = dat2 >> 7; //????????
dat2 <<= 1;
SRCLK = 0; //????
_nop_();
_nop_();
SRCLK = 1;
}
RCLK = 0;
_nop_();
_nop_();
RCLK = 1;
}
/********************************************************************
***********
* ? ? ? : main
* ???? : ???
* ? ? : ?
* ? ? : ?
*********************************************************************
**********/
void main()
{ LED=0; //?????????
while(1)
{
Hc595SendByte(0xfe,0x01);
}
}